<div class="min-h-screen bg-base-200">
  <%= render "shared/navbar" %>

  <div class="container mx-auto p-4">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-3xl font-bold">ドライバー管理</h1>
      <%= link_to "新規登録", new_admin_driver_path, class: "btn btn-primary" %>
    </div>

    <% if @drivers.any? %>
      <div class="overflow-x-auto">
        <table class="table table-zebra w-full bg-base-100">
          <thead>
            <tr>
              <th>名前</th>
              <th>メールアドレス</th>
              <th>権限</th>
              <th>ログイン回数</th>
              <th>最終ログイン</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody>
            <% @drivers.each do |driver| %>
              <tr>
                <td><%= driver.name %></td>
                <td><%= driver.email %></td>
                <td>
                  <% if driver.admin? %>
                    <span class="badge badge-primary">管理者</span>
                  <% else %>
                    <span class="badge badge-ghost">ドライバー</span>
                  <% end %>
                </td>
                <td><%= driver.sign_in_count %></td>
                <td>
                  <% if driver.last_sign_in_at %>
                    <%= l(driver.last_sign_in_at, format: :short) %>
                  <% else %>
                    <span class="text-gray-400">未ログイン</span>
                  <% end %>
                </td>
                <td>
                  <div class="flex gap-2">
                    <%= link_to "編集", edit_admin_driver_path(driver), class: "btn btn-sm btn-warning" %>
                    <%= button_to "削除", admin_driver_path(driver), method: :delete,
                        data: { turbo_confirm: "本当に削除しますか？このドライバーに紐づく運転記録がある場合は削除できません。" },
                        class: "btn btn-sm btn-error" %>
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    <% else %>
      <div class="alert alert-info">
        <span>ドライバーが登録されていません。</span>
      </div>
    <% end %>
  </div>
</div>
